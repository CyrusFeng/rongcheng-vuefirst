webpackJsonp([1],{NHnr:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=a("7+uW"),s={name:"App",data:function(){return{transitionName:""}},watch:{$route:function(t,i){console.log(t),console.log(i),i.name?void 0!==t.meta.index&&void 0!==i.meta.index&&(this.transitionName=t.meta.index>i.meta.index?"page-left":"page-right"):this.transitionName=""}},methods:{afterLeave:function(){this.transitionName="page-left"}},mounted:function(){}},n={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"app"}},[i("transition",{attrs:{name:this.transitionName}},[i("keep-alive",[i("router-view",{staticClass:"router-view"})],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,n,!1,function(t){a("gtk5")},null,null).exports,r=a("/ocq"),l=a("GQaK"),c=a("mtWM"),h=a.n(c),d={name:"myList",data:function(){return{showLoadingImg:!1,page:1,list:[],scroll:null,filterScroll:null,showFilter:!1,materialExpand:!1,organizationExpand:!1,labelStatus:!1,searchStatus:!0,searchResult:[],selectedResult:"",showResult:!0,viewHeight:0,timer:null,materielList:[],chosenMaterielList:[],organizationList:[],chosenOrganizationList:[],date:"",materielWrapHeightFixed:0,organizationlWrapHeightFixed:0,materielElementHeight:0,organizationElementHeight:0,materialOptions:{},organizationOptions:{},materielWrapHeight:0,organizationWrapHeight:0,filterWrap:0}},methods:{loadData:function(t,i,a,e,s,n){var o=this;console.log(e),this.showLoadingImg=!0,h.a.get("http://rap2api.taobao.org/app/mock/121282/getList",{params:{page:t,pageAmount:i,materiel:a,organization:e,date:s,search:n}}).then(function(t){o.showLoadingImg=!1,o.page++,o.list=t.data.data.concat(o.list),o.$nextTick(function(){o.scroll?o.scroll.refresh():(o.scroll=new l.a(o.$refs.wrapper,{click:!0,pullUpLoad:{threshold:-50}}),o.scroll.on("pullingUp",function(){o.loadData(o.page,10,o.chosenMaterielList,o.chosenOrganizationList,o.date,o.selectedResult),o.scroll.finishPullUp()}))})}).catch(function(t){console.log(t)})},getMateriel:function(){var t=this;h.a.get("http://rap2api.taobao.org/app/mock/121282/getMateriel").then(function(i){t.materielList=i.data.data}).catch(function(t){console.log(t)})},getOrganization:function(){var t=this;h.a.get("http://rap2api.taobao.org/app/mock/121282/getOrganization").then(function(i){t.organizationList=i.data.data}).catch(function(t){console.log(t)})},toggle:function(t){t.active?(e.a.set(t,"active",!1),t.materiel?this.$remove(this.chosenMaterielList,t.materielId):t.organization&&this.$remove(this.chosenOrganizationList,t.organizationId)):(e.a.set(t,"active",!0),t.materiel?this.chosenMaterielList.push(t.materielId):t.organization&&this.chosenOrganizationList.push(t.organizationId))},doSearch:function(){this.list.length=0,this.loadData(1,10,this.chosenMaterielList,this.chosenOrganizationList,this.date,this.selectedResult)},controlLength:function(t,i){return t.length>6?t.slice(0,i)+"...":t},isInArray:function(t,i){for(var a=0;a<t.length;a++)if(i===t[a])return console.log("InArray-----------------"),!0;return!1},changeShowFilter:function(){this.showFilter=!this.showFilter},changeShowSearch:function(){this.searchStatus=!this.searchStatus},labelHidden:function(t){this.labelStatus=!0,""===t.target.value&&(this.labelStatus=!1)},search:function(t,i){var a=this;this.selectedResult=t.target.value,this.labelHidden(t),clearTimeout(this.timer),this.timer=setTimeout(function(){""!==t.target.value?h.a.get("http://rap2api.taobao.org/app/mock/121282/search",{params:{keyword:t.target.value}}).then(function(t){a.searchResult=t.data.data}).catch(function(t){console.log(t)}):(a.showResult=!1,a.searchResult=[])},300)},hiddenSearch:function(){this.searchStatus=!0},showSearch:function(){this.searchStatus=!1,this.showResult=!0},resultToSearchBar:function(t){console.log(t.target.textContent),this.selectedResult=t.target.textContent,this.hiddenSearch(),this.searchResult=[]},getDate:function(t){this.date=t.target.value,this.loadData(1,10,this.chosenMaterielList,this.chosenOrganizationList,this.date,this.selectedResult)},toggleMaterialUpDown:function(t){var i=t;i.style.height.slice(0,i.style.height.length-2)/this.materielElementHeight>1?(i.style.height=this.materielElementHeight+"px",i.style.overflow="hidden",this.materialExpand=!1):(i.style.height=this.materielWrapHeightFixed+"px",this.materialExpand=!0),this.materielWrapHeight=i.style.height},toggleOrganizationUpDown:function(t){var i=t;i.style.height.slice(0,i.style.height.length-2)/this.organizationElementHeight>1?(i.style.height=this.organizationElementHeight+"px",i.style.overflow="hidden",this.organizationExpand=!1):(i.style.height=this.organizationWrapHeightFixed+"px",this.organizationExpand=!0),this.organizationWrapHeight=i.style.height},getMaterialHeight:function(t){var i=t,a=i.getBoundingClientRect().height-window.getComputedStyle(i).paddingTop.slice(0,window.getComputedStyle(i).paddingTop.length-2);this.materielWrapHeightFixed=a;var e=t.children[0],s=e.getBoundingClientRect(),n=window.getComputedStyle(e).marginBottom.slice(0,window.getComputedStyle(e).marginBottom.length-2);this.materielElementHeight=s.height+parseInt(n),i.style.height=this.materielElementHeight+"px",i.style.overflow="hidden"},getOrganizationHeight:function(t){var i=t,a=i.getBoundingClientRect().height-window.getComputedStyle(i).paddingTop.slice(0,window.getComputedStyle(i).paddingTop.length-2);this.organizationWrapHeightFixed=a;var e=t.children[0],s=e.getBoundingClientRect(),n=window.getComputedStyle(e).marginBottom.slice(0,window.getComputedStyle(e).marginBottom.length-2);this.organizationElementHeight=s.height+parseInt(n),i.style.height=this.organizationElementHeight+"px",i.style.overflow="hidden"},initDate:function(){var t=new Date,i=t.getFullYear(),a=t.getMonth()+1,e=t.getDate();a>=1&&a<=9&&(a="0"+a),e>=0&&e<=9&&(e="0"+e),this.date=i+"-"+a+"-"+e},focus:function(){this.$refs.searchWrap.style.height=this.viewHeight},blur:function(){this.$refs.searchWrap.style.height="100%"}},mounted:function(){this.getMateriel(),this.getOrganization(),this.viewHeight=window.innerHeight},beforeRouteEnter:function(t,i,a){a(function(t){t.loadData(1,10,t.chosenMaterielList,t.chosenOrganizationList,t.date,t.selectedResult)})},watch:{materielList:function(){var t=this;console.log("change mater"),this.showFilter||(this.showFilter=!0,this.$refs.filterPanel.style.visibility="hidden",this.$nextTick(function(){t.materialOptions=t.$refs.materialOptions,t.getMaterialHeight(t.$refs.materialOptions),t.showFilter=!1,t.$refs.filterPanel.style.visibility="visible"}))},organizationList:function(){var t=this;this.showFilter||(this.showFilter=!0,this.$refs.filterPanel.style.visibility="hidden",this.$nextTick(function(){t.organizationOptions=t.$refs.organizationOptions,t.getOrganizationHeight(t.$refs.organizationOptions),t.showFilter=!1,t.$refs.filterPanel.style.visibility="visible"}))},materielWrapHeight:function(){},organizationWrapHeight:function(){},filterWrap:function(){}}},u={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"myList-wrap"},[a("header",{staticClass:"top"},[a("div",{staticClass:"top-filter-btn",on:{click:function(i){t.changeShowFilter()}}},[a("span",{staticClass:"top-filter-btn-name"},[t._v("筛选")]),t._v(" "),a("i",{class:t.showFilter?"triangle-up":"triangle-down"})]),t._v(" "),a("div",{staticClass:"top-search"},[a("div",{staticClass:"input-wrap",on:{click:t.showSearch}},[a("span",[t._v(t._s(t.selectedResult))])]),t._v(" "),a("div",{staticClass:"top-search-btn",on:{click:t.doSearch}},[a("i",{staticClass:"search-icon"}),t._v(" "),a("span",[t._v("搜索")])])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showFilter,expression:"showFilter"}],ref:"filterPanel",staticClass:"filter-panel",on:{click:t.changeShowFilter}},[a("div",{ref:"filterWrap",staticClass:"filter-wrap",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"filter-tab"},[a("div",{staticClass:"material title"},[t._m(0),t._v(" "),a("div",[a("span",{staticClass:"title-right"},[t._v("全部物料")]),t._v(" "),a("i",{class:t.materialExpand?"up-icon":"",on:{click:function(i){t.toggleMaterialUpDown(t.materialOptions)}}})])]),t._v(" "),a("div",{ref:"materialOptions",staticClass:"material-options options"},t._l(t.materielList,function(i,e){return a("span",{key:e,staticClass:"item",class:{active:t.isInArray(t.chosenMaterielList,i.materielId)},on:{click:function(a){t.toggle(i)}}},[t._v(t._s(i.materiel))])}),0),t._v(" "),a("div",{staticClass:"organization title"},[t._m(1),t._v(" "),a("div",[a("span",{staticClass:"title-right"},[t._v("全部组织")]),t._v(" "),a("i",{class:t.organizationExpand?"up-icon":"",on:{click:function(i){t.toggleOrganizationUpDown(t.organizationOptions)}}})])]),t._v(" "),a("div",{ref:"organizationOptions",staticClass:"organization-options options"},t._l(t.organizationList,function(i,e){return a("span",{key:e,staticClass:"item",class:{active:t.isInArray(t.chosenOrganizationList,i.organizationId)},on:{click:function(a){t.toggle(i)}}},[t._v(t._s(i.organization))])}),0)]),t._v(" "),a("div",{staticClass:"btns"},[a("a",{staticClass:"reset"},[t._v("重置")]),t._v(" "),a("a",{staticClass:"sure",on:{click:function(i){t.doSearch(),t.changeShowFilter()}}},[t._v("确定")])])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.searchStatus,expression:"!searchStatus"}],ref:"searchWrap",staticClass:"search-wrap",on:{click:t.changeShowSearch}},[a("div",{staticClass:"search-bar-wrap",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"search-bar"},[a("i",{staticClass:"search-icon"}),t._v(" "),a("label",{directives:[{name:"show",rawName:"v-show",value:!t.labelStatus,expression:"!labelStatus"}],staticClass:"showName",attrs:{for:"search"}},[t._v("请输入供应商名称")]),t._v(" "),a("input",{attrs:{type:"text",id:"search"},domProps:{value:t.selectedResult},on:{input:function(i){t.search(i)},focus:t.focus,blur:t.blur}})]),t._v(" "),a("span",{staticClass:"cancelBtn",on:{click:t.hiddenSearch}},[t._v("取消")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showResult,expression:"showResult"}],staticClass:"result-wrap",on:{click:function(t){t.stopPropagation()}}},[a("ul",{staticClass:"result"},t._l(t.searchResult,function(i){return a("li",{on:{click:function(i){t.resultToSearchBar(i)}}},[t._v(t._s(i.name))])}),0)])]),t._v(" "),a("div",{staticClass:"date-wrap"},[a("span",{staticClass:"show"},[t._v(t._s(this.date?this.date:t.initDate()))]),t._v(" "),a("div",{staticClass:"data-plugin-wrap"},[a("input",{attrs:{type:"date"},on:{input:function(i){t.getDate(i)}}}),t._v(" "),a("i",{staticClass:"date-icon"})])]),t._v(" "),a("div",{ref:"wrapper",staticClass:"list-wrap"},[a("div",{staticClass:"wrap"},[a("ul",{staticClass:"content"},t._l(t.list,function(i,e){return a("li",{key:e},[a("div",{staticClass:"head"},[a("div",{staticClass:"left"},[a("span",{staticClass:"materiel-name"},[t._v(t._s(t.controlLength(i.materiel,6)))]),t._v(" "),a("span",{staticClass:"materiel-id"},[t._v("("+t._s(t.controlLength(i.id,20))+")")])]),t._v(" "),a("div",{staticClass:"right"},[a("span",[t._v(t._s(1===i.status?"正常":"关闭"))]),t._v(" "),a("i",{staticClass:"normal-icon"})])]),t._v(" "),a("div",{staticClass:"supplier"},[t._v(t._s(i.supplier))]),t._v(" "),a("div",{staticClass:"bottom"},[a("div",{staticClass:"label-wrap"},[a("span",{staticClass:"label"},[t._v("累计收货检斤量"+t._s(i.weight)+"T")]),t._v(" "),a("span",{staticClass:"label"},[t._v(t._s(t.controlLength(i.organization,8)))])]),t._v(" "),a("div",{staticClass:"more"},[a("router-link",{attrs:{to:{name:"detail",params:{id:i.id}}}},[t._v("更多")])],1)])])}),0),t._v(" "),t._m(2)])])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("span",{staticClass:"item"},[this._v("物料")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("span",{staticClass:"item"},[this._v("采购组织")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"loading-wrapper"},[i("p",{staticClass:"line"}),this._v(" "),i("img",{attrs:{src:a("oW0m"),alt:""}}),this._v(" "),i("p",{staticClass:"line"})])}]};var v=a("VU/8")(d,u,!1,function(t){a("eIVq")},"data-v-f8bd56d2",null).exports,p={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"tips-wrap"},[this.showTip?i("div",{key:"success",staticClass:"tip success"},[i("span",[this._v("保存成功")]),this._v(" "),i("i",{staticClass:"chenggong"})]):i("div",{staticClass:"tip fail"},[i("span",[this._v("保存失败")]),this._v(" "),i("i",{staticClass:"shibai"})])])},staticRenderFns:[]};var g={name:"myDetail",components:{tips:a("VU/8")({name:"tips",data:function(){return{}},props:["showTip"]},p,!1,function(t){a("xZkr")},"data-v-ac89970c",null).exports},created:function(){},beforeRouteEnter:function(t,i,a){a(function(t){console.log("beforeRouteEnter"),t.id=t.$route.params.id,h.a.get("http://rap2api.taobao.org/app/mock/121282/getDetail",{params:{id:t.id}}).then(function(i){t.data=i.data.data[0],t.status=t.data.status,t.orderQuantity=t.data.orderQuantity}).catch(function(t){console.log(t)})})},mounted:function(){},methods:{save:function(){var t=this;h.a.get("http://rap2api.taobao.org/app/mock/121282/update",{params:{id:this.id,status:this.status,orderQuantity:this.orderQuantity}}).then(function(i){console.log(i.data),t.showTip=i.data.success,t.showTips=!0,setTimeout(function(){t.showTips=!1},1e3),!0===i.data.success&&(t.data=i.data.data[0],t.edit=!1)}).catch(function(t){console.log(t)})},controlLength:function(t,i){if(t)return t.length>6?t.slice(0,i)+"...":t}},data:function(){return{id:0,edit:!1,data:{},status:0,orderQuantity:0,showLoadingImg:!1,showSuccess:!1,showFail:!1,showTip:!1,showTips:!1}}},m={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("div",{staticClass:"edit-wrap"},[a("i",{class:!1===t.edit?"edited-icon":"editing-icon",on:{click:function(i){t.edit=!t.edit}}})]),t._v(" "),a("div",{staticClass:"details-wrap"},[a("section",{staticClass:"head"},[a("div",{staticClass:"row"},[a("div",{staticClass:"left"},[a("span",{staticClass:"title"},[t._v(t._s(t.data.materiel))])]),t._v(" "),a("div",{staticClass:"right"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.edit,expression:"!edit"}],staticClass:"status-wrap"},[a("span",{staticClass:"status",class:1===t.data.status?"normal":"close"},[t._v(t._s(1===t.data.status?"正常":"关闭"))]),t._v(" "),a("i",{class:1===t.data.status?"normal-icon":"close-icon"})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"radio-wrap"},[t._m(0),t._v(" "),t._m(1)])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"left"},[a("span",{staticClass:"title"},[t._v(t._s(t.data.supplier))])]),t._v(" "),t._m(2)])]),t._v(" "),a("section",[a("div",{staticClass:"row"},[t._m(3),t._v(" "),a("div",{staticClass:"right"},[a("span",{staticClass:"content"},[t._v(t._s(t.data.date))])])]),t._v(" "),a("div",{staticClass:"row"},[t._m(4),t._v(" "),a("div",{staticClass:"right"},[a("span",{staticClass:"content"},[t._v(t._s(t.controlLength(t.data.materielId,20)))])])]),t._v(" "),a("div",{staticClass:"row"},[t._m(5),t._v(" "),a("div",{staticClass:"right"},[a("span",{staticClass:"content"},[t._v(t._s(t.data.serialNum))])])])]),t._v(" "),a("section",[a("div",{staticClass:"row"},[t._m(6),t._v(" "),a("div",{staticClass:"right"},[a("span",{staticClass:"content"},[t._v(t._s(t.data.weight))])])]),t._v(" "),a("div",{staticClass:"row"},[t._m(7),t._v(" "),a("div",{staticClass:"right"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.edit,expression:"!edit"}],staticClass:"content"},[t._v(t._s(t.data.orderQuantity))]),t._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"weight-input",attrs:{type:"text"}})])]),t._v(" "),a("div",{staticClass:"row"},[t._m(8),t._v(" "),a("div",{staticClass:"right"},[a("span",{staticClass:"content"},[t._v(t._s(t.data.carNum))])])])]),t._v(" "),a("section",[a("div",{staticClass:"row"},[t._m(9),t._v(" "),a("div",{staticClass:"right"},[a("span",{staticClass:"content"},[t._v(t._s(t.data.organization))])])]),t._v(" "),a("div",{staticClass:"row"},[t._m(10),t._v(" "),a("div",{staticClass:"right"},[a("span",{staticClass:"content"},[t._v(t._s(t.data.transportMode))])])])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"btns"},[a("span",{staticClass:"save",on:{click:t.save}},[t._v("保存")])]),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("tips",{directives:[{name:"show",rawName:"v-show",value:t.showTips,expression:"showTips"}],attrs:{showTip:t.showTip}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"group"},[i("input",{staticClass:"rdo",attrs:{type:"radio",name:"sex",checked:""}}),this._v(" "),i("label",{staticClass:"rdo-text yes"},[this._v("是")]),this._v(" "),i("i",{staticClass:"normal-icon"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"group"},[i("input",{staticClass:"rdo",attrs:{type:"radio",name:"sex"}}),this._v(" "),i("label",{staticClass:"rdo-text no"},[this._v("否")]),this._v(" "),i("i",{staticClass:"close-icon"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"right"},[i("span",{staticClass:"content"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"left"},[i("span",{staticClass:"title"},[this._v("日期")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"left"},[i("span",{staticClass:"title"},[this._v("单据编号")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"left"},[i("span",{staticClass:"title"},[this._v("分录序列号")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"left"},[i("span",{staticClass:"title"},[this._v("累计收货检斤量")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"left"},[i("span",{staticClass:"title"},[this._v("订货数量")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"left"},[i("span",{staticClass:"title"},[this._v("已完成检车辆数")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"left"},[i("span",{staticClass:"title"},[this._v("采购组织")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"left"},[i("span",{staticClass:"title"},[this._v("运输方式")])])}]};var f=a("VU/8")(g,m,!1,function(t){a("hzZo")},"data-v-f0ec8738",null).exports;e.a.use(r.a);var _=new r.a({base:"/dist/",routes:[{path:"/",name:"list",component:v,meta:{index:0}},{path:"/list",name:"list",component:v,meta:{index:0}},{path:"/detail/:id",name:"detail",component:f,meta:{index:1}}]}),w=a("//Fk"),C=a.n(w),y=a("fZjL"),x={getList:"/getList",search:"/search",getMateriel:"/getMateriel",getOrganization:"/getOrganization"};a.n(y)()(x).forEach(function(t){x[t]="http://rap2api.taobao.org/app/mock/121282"+x[t]});var z=x;var b=function(t,i){return new C.a(function(a,e){h.a.post(z[t],i).then(function(t){a(t.data)}).catch(function(t){e(t)})})};a("Vc2k");!function(){let t=window.screen.width;document.documentElement.style.fontSize=t/3.75+"px",document.documentElement.addEventListener("touchstart",function(t){t.touches.length>1&&t.preventDefault()},!1);let i=0;document.documentElement.addEventListener("touchend",function(t){let a=Date.now();a-i<=300&&t.preventDefault(),i=a},!1)}(),e.a.config.productionTip=!1,e.a.prototype.$fetch=b,e.a.prototype.$remove=function(t,i){for(var a=0,e=0;e<t.length;e++)t[e]==i&&(a=e);return t.splice(a,1),t},new e.a({el:"#app",router:_,components:{App:o},template:"<App/>"})},Vc2k:function(t,i){},eIVq:function(t,i){},gtk5:function(t,i){},hzZo:function(t,i){},oW0m:function(t,i,a){t.exports=a.p+"static/img/loading-bottom.0adf14e.gif"},xZkr:function(t,i){}},["NHnr"]);
//# sourceMappingURL=app.d794c4e60899d8caaa7d.js.map